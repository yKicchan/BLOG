---
title: 'sitemap.xml ã‚’ Next.js ã§ãƒ“ãƒ«ãƒ‰æ™‚ã«è‡ªå‹•ç”Ÿæˆã™ã‚‹'
excerpt: 'ã“ã®ãƒ–ãƒ­ã‚°ã®ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ãŸã®ã§ãã®å†…å®¹ç´¹ä»‹'
createdAt: '2021-04-08'
tags:
- sitemap.xml
- Next.js
- SSG
---

ã“ã®ãƒ–ãƒ­ã‚°ã®ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ãŸã®ã§ã€ãã®å†…å®¹ã‚’è»½ãç´¹ä»‹ã€‚  
å®Ÿéš›ã®å¤‰æ›´ã¯ [PR](https://github.com/yKicchan/BLOG/pull/290) ã‚’ã”è¦§ãã ã•ã„ã€‚

## å‰æ

- Next.js + SSG
- ã“ã®è¨­å®šã¯ãƒ“ãƒ«ãƒ‰æ™‚ã®ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ç”Ÿæˆã§ã‚ã‚‹ãŸã‚ã€ã‚ã‚‰ã‹ã˜ã‚æ³¨æ„

## ä½¿ã£ãŸã‚‚ã®

- [next-sitemap](https://github.com/iamvishnusankar/next-sitemap)

## ã‚„ã£ãŸã“ã¨

### 1. `next-sitemap` ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```shell
$ yarn add next-sitemap
```

### 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

ãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆã«ä½œæˆã™ã‚‹

```js
// next-sitemap.js
module.exports = {
  siteUrl: process.env.HOST || 'https://example.com',
  generateRobotsTxt: true, // â† robots.txt ãŒä¸è¦ãªã‚‰ false ã§ãŠk
  outDir: './out'
}
```

### 3. ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å®Ÿè¡Œè¨­å®š

```json
// package.json
{
  "scripts": {
    // '&& next-sitemap' ã‚’ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¿½è¨˜ã—ãŸã ã‘
    "build": "next build && next export && next-sitemap"
  }
}
```

ãŸã£ãŸã“ã‚Œã ã‘ã§ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ãŒãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆã•ã‚ŒãŸğŸ™Œ

## å®Ÿéš›ã«å‡ºæ¥ä¸ŠãŒã£ãŸã‚‚ã®

```xml
<!-- out/sitemap.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:news="http://www.google.com/schemas/sitemap-news/0.9" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0" xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns:video="http://www.google.com/schemas/sitemap-video/1.1">
<url><loc>https://www.ykicchan.dev</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
<url><loc>https://www.ykicchan.dev/about</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
<url><loc>https://www.ykicchan.dev/posts/2021-03-26</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
<url><loc>https://www.ykicchan.dev/posts/2021-03-12</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
<url><loc>https://www.ykicchan.dev/posts/2020-07-20</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
<url><loc>https://www.ykicchan.dev/posts/2020-07-13</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
<url><loc>https://www.ykicchan.dev/posts/2020-07-12</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
<url><loc>https://www.ykicchan.dev/posts/2020-07-04</loc><changefreq>daily</changefreq><priority>0.7</priority><lastmod>2021-04-06T06:04:19.307Z</lastmod></url>
</urlset>
```

```txt
# out/robots.txt
# *
User-agent: *
Allow: /

# Host
Host: https://www.ykicchan.dev

# Sitemaps
Sitemap: https://www.ykicchan.dev/sitemap.xml
```

ã‚‚ã¡ã‚ã‚“ã“ã‚Œã¯æœ€ä½é™ã®è¨­å®šã§ã€è©³ã—ãè¨­å®šã—ãŸã„å ´åˆã¯ `next-sitemap.js` ã§å¤‰æ›´å¯èƒ½ã€‚  
è©³ã—ãã¯ [next-sitemap/configuration-options](https://github.com/iamvishnusankar/next-sitemap#configuration-options) ã‚’å‚ç…§ã€‚

ãªãŠã€ä»Šå›ã¯ SSG ã§ã®åˆ©ç”¨ã ã£ãŸãŒã€`next-sitemap` å‹•çš„ç”Ÿæˆã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ã€‚  
å‹•çš„ç”Ÿæˆã™ã‚‹å ´åˆã¯ [zenn.dev](https://zenn.dev/) ã®ç”Ÿã¿ã®è¦ªã§ã‚ã‚‹ [@catnose99](https://twitter.com/catnose99) ã•ã‚“ã®è¨˜äº‹ã€ [Next.jsã§å‹•çš„ã«XMLã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã‚’ç”Ÿæˆã™ã‚‹](https://zenn.dev/catnose99/articles/c441954a987c24) ãŒå‚è€ƒã«ãªã£ãŸã€‚

## ãªãœ `next-sitemap` ã‚’æ¡ç”¨ã—ãŸã‹ï¼Ÿ

[nextjs-sitemap-generator](https://github.com/IlusionDev/nextjs-sitemap-generator) ã®åˆ©ç”¨ã‚‚åˆã‚ã¯æ¤œè¨ã—ãŸãŒ

> If you want use this package you must create the sever file. You can find how to do it here NextJs custom server

ã¨ README ã«ã‚ã‚‹ã‚ˆã†ã«ã€ Custom Server ã®åˆ©ç”¨ãŒå¿…è¦ãªæ¨¡æ§˜ã€‚  
Custom Server ã¯ä½¿ã£ã¦ãŠã‚‰ãšã€å›é¿ã§ãã‚‹ãªã‚‰ã—ãŸã‹ã£ãŸãŸã‚ã€åˆ¥ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª(`next-sitemap`)ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚

è‡ªå‰ã§å‹•çš„ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚å°‘ã—è€ƒãˆãŸãŒã€ç¾çŠ¶ãƒ“ãƒ«ãƒ‰æ™‚ã«ã—ã‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚‚å¢—ãˆãªã„è¨­è¨ˆã ã£ãŸãŸã‚ã€ã‚ã–ã‚ã–å‹•çš„ç”Ÿæˆã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã‚‚ç‰¹ã«ãªã‹ã£ãŸã€‚  
ã»ã¨ã‚“ã©è¨­å®šãŒä¸è¦ã§å°å…¥ãŒæ¥½ãªã‚‚ã®ã‚’æ¢ã—ã€çµæœ `next-sitemap` ã‚’æ¡ç”¨ã—ãŸã€‚
